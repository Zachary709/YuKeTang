# 雨课堂刷课脚本

`course_app.py` 是一个命令行脚本，用于自动化雨课堂视频学习过程，核心流程包含二维码扫码登录、课程选择以及自动发送心跳记录以提升视频覆盖率。脚本在单次运行期间保持统一的浏览器指纹，并带有日志、重试、进度监控等机制，旨在模拟更真实的观看行为。核心模块已拆分为 `login_workflow.py`（登录）、`course_progress.py`（刷课逻辑）、`http_client.py`（会话与指纹配置）以及 `logging_utils.py`（日志输出），便于维护与扩展。

## 功能简介
- WebSocket 获取二维码，扫码后自动完成登录。
- 拉取课程列表，让用户手动选择需要刷的课堂。
- 自动遍历章节-小节，提取全部视频，并逐个完成。
- 发送模拟心跳（`video-log/heartbeat`）并实时校验覆盖率，覆盖率未达 100% 时会回放补刷。
- 异常、进度、完成状态均通过统一日志输出，方便观察。

## 环境要求
- Python 3.8+
- 依赖库：`requests`、`websockets`

快速安装：
```bash
pip install requests websockets
```

## 使用步骤
1. 运行脚本：`python course_app.py`
2. 等待终端弹出二维码提示，扫码并绑定对应的雨课堂账号。
3. 终端会列出当前可用课程，输入序号即可开始刷课。
4. 每个视频都会实时显示进度、覆盖率；达到 100% 覆盖率后自动跳过。
5. 完成后可选择是否继续下一门课程。

## 注意事项
- 仅适配雨课堂 PC 端接口，主要针对西电研究生的课程结构；其他账号请自行测试。
- 登录二维码默认保存在 `login_qr.png`，如需更改可修改源码对应部分。
- 若过程中出现网络波动，脚本会自动重试心跳；若仍失败可重新运行。
- **某些视频可能会显示“加载时长失败”**，一般是因为该视频是其他格式，雨课堂没有自动缓存，需要自己手动打开一下所有不能刷的视频，之后再开始刷课。

## 声明
本项目仅供学习研究，请勿用于任何违反校规或法律的用途。
